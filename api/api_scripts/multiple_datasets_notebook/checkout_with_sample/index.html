
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://hpinc.github.io/ml-git/api/api_scripts/multiple_datasets_notebook/checkout_with_sample/">
      
      
        <link rel="prev" href="../../mnist_notebook/mnist_random_forest_cli/">
      
      
        <link rel="next" href="../multiple_datasets/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.7">
    
    
      
        <title>Checkout With Sample - ML-Git</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#checkout-with-sample" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="ML-Git" class="md-header__button md-logo" aria-label="ML-Git" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ML-Git
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Checkout With Sample
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../developer_info/" class="md-tabs__link">
        
  
    
  
  Contributing to ML-Git

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="ML-Git" class="md-nav__button md-logo" aria-label="ML-Git" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ML-Git
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../first_steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../advanced_scenarios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional Use Cases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mlgit_internals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../centralized_cache_and_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache and Objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mutability_helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mutability Helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../resources_initialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources Initialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tabular_data/tabular_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working With Tabular Data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Supported Storages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Supported Storages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../storage_configurations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configurations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../minio_s3_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MinIO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../aws_s3_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../azure_configurations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gdrive_configurations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Drive
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../mlgit_commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using ML-Git CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2" >
        
          <label class="md-nav__link" for="__nav_1_6_2" id="__nav_1_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Using ML-Git API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2">
            <span class="md-nav__icon md-icon"></span>
            Using ML-Git API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Methods
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../downloadable_environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" checked>
        
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ML-Git Step-by-Step Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            ML-Git Step-by-Step Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../step_by_step_guides/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_flow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../clone_repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clone Repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../multiple_projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../relationship_notebook/relationship_api_commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Relationship API Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mnist_notebook/mnist_random_forest_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MNIST Random Forest API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mnist_notebook/mnist_random_forest_cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MNIST Random Forest CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Checkout With Sample
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Checkout With Sample
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#checkout-with-sample" class="md-nav__link">
    Checkout with sample
  </a>
  
    <nav class="md-nav" aria-label="Checkout with sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notebook-state-management" class="md-nav__link">
    Notebook state management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-start-using-the-ml-git-api-we-need-to-import-it-into-our-script-and-make-sure-that-we-are-in-correct-folder" class="md-nav__link">
    To start using the ml-git api we need to import it into our script, and make sure that we are in correct folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-that-we-define-some-variables-that-will-be-used-by-the-script" class="md-nav__link">
    After that, we define some variables that will be used by the script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before-using-the-sample-option-we-will-checkout-the-entity-to-check-the-files-contained-in-the-tag" class="md-nav__link">
    Before using the sample option, we will checkout the entity to check the files contained in the tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-be-able-to-checkout-the-same-tag-we-use-the-following-method-to-remove-some-files" class="md-nav__link">
    To be able to checkout the same tag, we use the following method to remove some files.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkout-with-group-sample" class="md-nav__link">
    Checkout with group sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkout-with-range-sample" class="md-nav__link">
    Checkout with range sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkout-with-random-sample" class="md-nav__link">
    Checkout with random sample
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../multiple_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Datasets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing to ML-Git
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Checkout With Sample</h1>

<h2 id="checkout-with-sample">Checkout with sample<a class="headerlink" href="#checkout-with-sample" title="Permanent link">&para;</a></h2>
<p>This notebook describes how to perform a checkout operation with ML-Git using samples of a dataset.</p>
<p>The checkout command has three types of sampling options available only for dataset: <code>--sample-type=group --seed</code>,<code>--sample-type=random --seed</code>,<code>--sample-type=range</code> . We use <a href="https://docs.python.org/3.7/library/random.html#random.sample">random.sample(population, k)</a> to return a sample of the size k from the population elements. We use <a href="https://docs.python.org/3.7/library/random.html#random.sample">random.seed()</a> to set the seed so that the sample generated by <code>random.sample()</code> can be reproduced between experiments. We use the <a href="https://docs.python.org/3.7/library/stdtypes.html?highlight=range#range">range()</a> object to take samples from a given range.</p>
<h4 id="example">Example:<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<p><img alt="dataset" src="../../../../dataset.png" /></p>
<p>Let's assume that we have a dataset that contains 12 files.</p>
<p><code>ml-git datasets checkout computer-vision__images__dataset-ex__22 --sample-type=group --sampling=2:5 --seed=1</code> : This command selects 2 files randomly from every group of five files to download.</p>
<p><img alt="group-sample" src="../../../../group-sample.png" /></p>
<p><code>ml-git datasets checkout computer-vision__images__dataset-ex__22 --sample-type=random --sampling=2:6 --seed=1</code> : This command makes a sample = (amount * len (dataset))% frequency ratio, sample = 4, so four files are selected randomly to download.  </p>
<p><img alt="random-sample" src="../../../../random-sample.png" /></p>
<p><code>ml-git datasets checkout computer-vision__images__dataset-ex__22 --sample-type=range --sampling=2:11:2</code> : This command selects the files at indexes generated by <code>range(start=2, stop=11, step=2)</code>.</p>
<p><img alt="range-sample" src="../../../../range-sample.png" /></p>
<h4 id="notebook-state-management">Notebook state management<a class="headerlink" href="#notebook-state-management" title="Permanent link">&para;</a></h4>
<p>Before execute any cell from this notebook, make sure that you have executed all cells from notebook multiple_datasets in same folder.</p>
<h4 id="to-start-using-the-ml-git-api-we-need-to-import-it-into-our-script-and-make-sure-that-we-are-in-correct-folder">To start using the ml-git api we need to import it into our script, and make sure that we are in correct folder<a class="headerlink" href="#to-start-using-the-ml-git-api-we-need-to-import-it-into-our-script-and-make-sure-that-we-are-in-correct-folder" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_git.api</span> <span class="kn">import</span> <span class="n">MLGitAPI</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">%</span><span class="n">cd</span> <span class="o">/</span><span class="n">api_scripts</span><span class="o">/</span><span class="n">multiple_datasets_notebook</span>
</code></pre></div>
<h4 id="after-that-we-define-some-variables-that-will-be-used-by-the-script">After that, we define some variables that will be used by the script<a class="headerlink" href="#after-that-we-define-some-variables-that-will-be-used-by-the-script" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># The type of entity we are working on</span>
<span class="n">entity</span> <span class="o">=</span> <span class="s1">&#39;datasets&#39;</span>

<span class="c1"># Existing tag in our repository</span>
<span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;peopleFaces&#39;</span>
</code></pre></div>
<h4 id="before-using-the-sample-option-we-will-checkout-the-entity-to-check-the-files-contained-in-the-tag">Before using the sample option, we will checkout the entity to check the files contained in the tag<a class="headerlink" href="#before-using-the-sample-option-we-will-checkout-the-entity-to-check-the-files-contained-in-the-tag" title="Permanent link">&para;</a></h4>
<p>The datapath returned by the function tells us where the entity's data was downloaded. That way we can use the following method to print the files that are in the entity's directory</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;*.jpg&#39;</span>

<span class="k">def</span> <span class="nf">print_files</span><span class="p">():</span>
    <span class="n">data_path</span> <span class="o">=</span> <span class="s1">&#39;datasets/peopleFaces/data/people_faces&#39;</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">data_type</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Downloaded files: &#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">imageName</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">imageName</span><span class="p">))</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">imageName</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">150</span><span class="p">))</span>

<span class="n">print_files</span><span class="p">()</span>
</code></pre></div>
<pre><code>Downloaded files: 
    datasets/people_faces/data/people_faces/3.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_1.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/4.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_3.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/8.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_5.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/5.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_7.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/1.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_9.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/9.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_11.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/10.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_13.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/7.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_15.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/6.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_17.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/2.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_12_19.jpg" /></p>
<h4 id="to-be-able-to-checkout-the-same-tag-we-use-the-following-method-to-remove-some-files">To be able to checkout the same tag, we use the following method to remove some files.<a class="headerlink" href="#to-be-able-to-checkout-the-same-tag-we-use-the-following-method-to-remove-some-files" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">stat</span>

<span class="c1"># function created to clear directory</span>
<span class="k">def</span> <span class="nf">clear_path</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="c1"># SET the permission for files inside the .git directory to clean up</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRWXG</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRWXO</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;except: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">clear_environment</span><span class="p">():</span>
    <span class="n">clear_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;.ml-git&#39;</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">))</span>
    <span class="n">clear_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;.ml-git&#39;</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="s1">&#39;refs&#39;</span><span class="p">))</span>
    <span class="n">clear_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>

<span class="n">clear_environment</span><span class="p">()</span>
</code></pre></div>
<h4 id="checkout-with-group-sample">Checkout with group sample<a class="headerlink" href="#checkout-with-group-sample" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">sampling</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;1:5&#39;</span><span class="p">,</span> <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">}</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">MLGitAPI</span><span class="p">()</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">sampling</span><span class="p">)</span>

<span class="n">print_files</span><span class="p">()</span>

<span class="n">clear_environment</span><span class="p">()</span>
</code></pre></div>
<pre><code>INFO - Metadata Manager: Pull [/api_scripts/multiple_datasets_notebook/.ml-git/datasets/metadata]
INFO - Metadata: Performing checkout on the entity's lastest tag (computer-vision__images__people_faces__2)
blobs: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.73kblobs/s]
chunks: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.38kchunks/s]
files into cache: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.54kfiles into cache/s]
files into workspace: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.50kfiles into workspace/s]


Downloaded files: 
    datasets/people_faces/data/people_faces/1.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_16_2.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/6.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_16_4.jpg" /></p>
<h4 id="checkout-with-range-sample">Checkout with range sample<a class="headerlink" href="#checkout-with-range-sample" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">sampling</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="s1">&#39;0:4:3&#39;</span><span class="p">}</span>

<span class="n">data_path</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">sampling</span><span class="p">)</span>

<span class="n">print_files</span><span class="p">()</span>

<span class="n">clear_environment</span><span class="p">()</span>
</code></pre></div>
<pre><code>INFO - Metadata Manager: Pull [/api_scripts/multiple_datasets_notebook/.ml-git/datasets/metadata]
INFO - Metadata: Performing checkout on the entity's lastest tag (computer-vision__images__people_faces__2)
blobs: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.28kblobs/s]
chunks: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.37kchunks/s]
files into cache: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.16kfiles into cache/s]
files into workspace: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.13kfiles into workspace/s]


Downloaded files: 
    datasets/people_faces/data/people_faces/6.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_18_2.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/2.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_18_4.jpg" /></p>
<h4 id="checkout-with-random-sample">Checkout with random sample<a class="headerlink" href="#checkout-with-random-sample" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">sampling</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;random&#39;</span><span class="p">:</span> <span class="s1">&#39;1:5&#39;</span><span class="p">,</span> <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>

<span class="n">data_path</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">sampling</span><span class="p">)</span>

<span class="n">print_files</span><span class="p">()</span>

<span class="n">clear_environment</span><span class="p">()</span>
</code></pre></div>
<pre><code>INFO - Metadata Manager: Pull [/api_scripts/multiple_datasets_notebook/.ml-git/datasets/metadata]
INFO - Metadata: Performing checkout on the entity's lastest tag (computer-vision__images__people_faces__2)
blobs: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.13kblobs/s]
chunks: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.14kchunks/s]
files into cache: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.81kfiles into cache/s]
files into workspace: 100%|██████████| 2.00/2.00 [00:00&lt;00:00, 1.01kfiles into workspace/s]


Downloaded files: 
    datasets/people_faces/data/people_faces/4.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_20_2.jpg" /></p>
<pre><code>    datasets/people_faces/data/people_faces/5.jpg
</code></pre>
<p><img alt="jpeg" src="../checkout_with_sample_files/checkout_with_sample_20_4.jpg" /></p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 3, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "toc.integrate"], "search": "../../../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>